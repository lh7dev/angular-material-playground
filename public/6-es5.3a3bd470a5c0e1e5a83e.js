function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(t);if(e){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{R1GA:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomerModule",(function(){return pt}));var i,o,c,a,r=n("ofXK"),s=n("tk/3"),l=n("3Pt+"),u=n("bTqV"),d=n("bSwM"),b=n("0IaG"),f=n("f0Cb"),m=n("qFsG"),p=n("M9IT"),h=n("Xa2L"),g=n("Dh3D"),y=n("+0xr"),C=n("wZkO"),v=n("tyNb"),T=n("1uGz"),U=n("fXoL"),_=n("HDdC"),w=n("uWVk"),k=n("IYfF"),P=n("n7rY"),O=n("dNgK"),z=((i=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o,c){var a;return _classCallCheck(this,n),(a=e.call(this,t,i,o,c)).httpService=t,a.authService=i,a.dummyDataService=o,a.snackbarService=c,a}return _createClass(n,[{key:"getList",value:function(){return this.dummyDataService.customerList()}},{key:"getDetails",value:function(t){return this.dummyDataService.customerDetails(t)}},{key:"applyNew",value:function(t){return this.dummyDataService.applyNew(t)}},{key:"applyEdit",value:function(t){return new _.a((function(t){console.log("updating data... not really"),t.next({success:!0})}))}},{key:"addContact",value:function(t){return new _.a((function(t){console.log("adding contact... not really"),t.next({success:!0})}))}}]),n}(w.a)).\u0275fac=function(t){return new(t||i)(U.Yb(s.a),U.Yb(k.a),U.Yb(P.a),U.Yb(O.a))},i.\u0275prov=U.Kb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),x=n("kmnG"),I=((a=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i,o){var c;return _classCallCheck(this,n),(c=e.call(this,t,i,o)).custService=t,c.dialogRef=i,c.fb=o,c}return _createClass(n,[{key:"ngOnInit",value:function(){this.controlsConfig={name:["",[l.p.required,l.p.minLength(3)]],status:["active",l.p.required],country:["us",l.p.required],address1:["",l.p.required],address2:[""],city:["",l.p.required],state:["",l.p.required],zipcode:["",[l.p.required,l.p.pattern("^[0-9]{5}(?:-[0-9]{4})?$")]],contactName:["",l.p.required],phone:["",[l.p.required,l.p.pattern("^\\d{10}$")]],email:["",[l.p.required,l.p.email]]},this.initForm(this.controlsConfig)}},{key:"formatData",value:function(t){var e={name:t.contactName,email:t.email,phone:t.phone};return{id:null,number:null,name:t.name,status:t.status,address:{country:t.country,address_line_1:t.address1,address_line_2:t.address2,city:t.city,state:t.state,zipcode:t.zipcode},default_contact:e,contacts:[e]}}}]),n}(function(){function t(e,n,i){_classCallCheck(this,t),this.service=e,this.dialogRef=n,this.fb=i}return _createClass(t,[{key:"initForm",value:function(t){this.form=this.fb.group(t)}},{key:"dialogClose",value:function(){this.dialogRef.close()}},{key:"onFormSubmit",value:function(){var t=this;if(this.form.valid){console.log("form is valid, should send values");var e=this.formatData(this.form.value);this.service.applyNew(e).subscribe((function(e){e.success?(t.service.notify(e.message),t.dialogRef.close()):t.service.notify(e.message)}))}else{console.log("form is invalid, showing notification");for(var n=0,i=Object.keys(this.form.controls);n<i.length;n++){var o=i[n];console.log(o+" is "+this.form.controls[o].status),"INVALID"==this.form.controls[o].status&&console.log(this.form.controls[o].errors)}console.log(this.form),this.service.notify("The form is not valid")}}}]),t}())).\u0275fac=function(t){return new(t||a)(U.Ob(z),U.Ob(b.e),U.Ob(l.c))},a.\u0275cmp=U.Ib({type:a,selectors:[["lh7-customer-new"]],features:[U.zb],decls:37,vars:1,consts:[[1,"header-section"],[1,"spacer"],[1,"content-section"],[3,"formGroup","ngSubmit"],[1,"customer-name"],["matInput","","placeholder","Customer Name","type","text","min","3","formControlName","name","required",""],[1,"address-info"],["matInput","","placeholder","Address line 1","type","text","min","5","formControlName","address1","required",""],["matInput","","placeholder","Address line 2","type","text","formControlName","address2"],["matInput","","placeholder","City","type","text","min","3","formControlName","city","required",""],["matInput","","placeholder","State","type","text","min","3","formControlName","state","required",""],["matInput","","placeholder","Zip Code","type","text","formControlName","zipcode","required",""],[1,"contact-info"],["matInput","","placeholder","contact name","type","text","min","3","formControlName","contactName","required",""],["matInput","","placeholder","phone number","type","text","formControlName","phone","required",""],["matInput","","placeholder","email","type","email","formControlName","email","required",""],[1,"form-actions"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit"]],template:function(t,e){1&t&&(U.Ub(0,"div",0),U.Ub(1,"mat-label"),U.zc(2,"New Customer"),U.Tb(),U.Pb(3,"span",1),U.Tb(),U.Ub(4,"div",2),U.Ub(5,"form",3),U.cc("ngSubmit",(function(){return e.onFormSubmit()})),U.Ub(6,"mat-dialog-content"),U.Ub(7,"section",4),U.Ub(8,"mat-form-field"),U.Pb(9,"input",5),U.Tb(),U.Tb(),U.Ub(10,"section",6),U.Ub(11,"h4"),U.zc(12,"Customer's main address"),U.Tb(),U.Ub(13,"mat-form-field"),U.Pb(14,"input",7),U.Tb(),U.Ub(15,"mat-form-field"),U.Pb(16,"input",8),U.Tb(),U.Ub(17,"mat-form-field"),U.Pb(18,"input",9),U.Tb(),U.Ub(19,"mat-form-field"),U.Pb(20,"input",10),U.Tb(),U.Ub(21,"mat-form-field"),U.Pb(22,"input",11),U.Tb(),U.Tb(),U.Ub(23,"section",12),U.Ub(24,"h4"),U.zc(25,"Contact information"),U.Tb(),U.Ub(26,"mat-form-field"),U.Pb(27,"input",13),U.Tb(),U.Ub(28,"mat-form-field"),U.Pb(29,"input",14),U.Tb(),U.Ub(30,"mat-form-field"),U.Pb(31,"input",15),U.Tb(),U.Tb(),U.Tb(),U.Ub(32,"div",16),U.Ub(33,"button",17),U.cc("click",(function(){return e.dialogClose()})),U.zc(34,"Cancel"),U.Tb(),U.Ub(35,"button",18),U.zc(36,"Create"),U.Tb(),U.Tb(),U.Tb(),U.Tb()),2&t&&(U.Cb(5),U.lc("formGroup",e.form))},directives:[x.e,l.q,l.l,l.f,b.c,x.b,m.a,l.b,l.k,l.d,l.o,u.b],styles:[".td-text[_ngcontent-%COMP%], .th-text[_ngcontent-%COMP%]{padding:0 10px}.td-text[_ngcontent-%COMP%]{padding:15px}.list-checkbox-td[_ngcontent-%COMP%]{width:60px}.list-name-td[_ngcontent-%COMP%]{min-width:130px;overflow-x:hidden;overflow-y:hidden}.list-sku-td[_ngcontent-%COMP%], .list-type-td[_ngcontent-%COMP%]{max-width:80px}.list-price-td[_ngcontent-%COMP%]{width:15%;min-width:100px}.list-status-td[_ngcontent-%COMP%]{width:8%;min-width:50px}.loading-spinner-wrap[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.35)}.header-section[_ngcontent-%COMP%]{display:flex}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.form-actions[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:4px;margin-right:4px;margin-top:15px}section[_ngcontent-%COMP%]{display:flex;flex-flow:column}"]}),a),D=((c=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.message=""}return _createClass(t,[{key:"ngOnInit",value:function(){console.log(this.data),this.message="You are about to permanently delete ".concat(this.data.count," ").concat(this.data.entityRefText,". Do you want to proceed?"),console.log(this.message)}},{key:"cancel",value:function(){this.dialogRef.close({userConfirmed:!1})}},{key:"confirm",value:function(){this.dialogRef.close({userConfirmed:!0})}},{key:"ItemCount",get:function(){return this.itemCount}},{key:"EntityName",get:function(){return this.entityName}}]),t}()).\u0275fac=function(t){return new(t||c)(U.Ob(b.e),U.Ob(b.a))},c.\u0275cmp=U.Ib({type:c,selectors:[["app-delete-view"]],decls:8,vars:1,consts:[[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-button","","color","danger",3,"click"]],template:function(t,e){1&t&&(U.Ub(0,"mat-dialog-content"),U.Ub(1,"p"),U.zc(2),U.Tb(),U.Tb(),U.Ub(3,"div",0),U.Ub(4,"button",1),U.cc("click",(function(){return e.cancel()})),U.zc(5,"Cancel"),U.Tb(),U.Ub(6,"button",2),U.cc("click",(function(){return e.confirm()})),U.zc(7,"Delete"),U.Tb(),U.Tb()),2&t&&(U.Cb(2),U.Ac(e.message))},directives:[b.c,u.b],styles:[""]}),c),N=((o=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t){return"".concat((t="+1"+t).slice(0,2)," (").concat(t.slice(2,5),")").concat(t.slice(5,8),"-").concat(t.slice(8))}}]),t}()).\u0275fac=function(t){return new(t||o)},o.\u0275pipe=U.Nb({name:"phone",type:o,pure:!0}),o);function S(t,e){if(1&t&&(U.Ub(0,"div",2),U.Ub(1,"div",3),U.Ub(2,"h3",4),U.zc(3),U.Tb(),U.Ub(4,"span"),U.zc(5,"phone: "),U.Ub(6,"a",5),U.zc(7),U.hc(8,"phone"),U.Tb(),U.Tb(),U.Pb(9,"br"),U.Ub(10,"span"),U.zc(11,"email: "),U.Ub(12,"a",5),U.zc(13),U.Tb(),U.Tb(),U.Tb(),U.Pb(14,"mat-divider"),U.Tb()),2&t){var n=e.$implicit;U.Cb(3),U.Ac(n.name),U.Cb(3),U.lc("href","tel:"+n.phone,U.tc),U.Cb(1),U.Ac(U.ic(8,5,n.phone)),U.Cb(5),U.lc("href","mailto:"+n.email,U.tc),U.Cb(1),U.Ac(n.email)}}var R,M=((R=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){console.log(this.contacts)}}]),t}()).\u0275fac=function(t){return new(t||R)},R.\u0275cmp=U.Ib({type:R,selectors:[["app-customer-details-contact"]],inputs:{contacts:"contacts"},decls:2,vars:1,consts:[[1,"list-content"],["class","item",4,"ngFor","ngForOf"],[1,"item"],[1,"item-content"],[1,"contact-name"],["mat-button","","color","primary",3,"href"]],template:function(t,e){1&t&&(U.Ub(0,"div",0),U.yc(1,S,15,7,"div",1),U.Tb()),2&t&&(U.Cb(1),U.lc("ngForOf",e.contacts))},directives:[r.l,u.a,f.a],pipes:[N],styles:[".item-content[_ngcontent-%COMP%]{padding:20px 0}.contact-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin-bottom:5px}"]}),R);function q(t,e){1&t&&(U.Ub(0,"div",6),U.Pb(1,"mat-spinner"),U.Tb())}function A(t,e){if(1&t&&(U.Ub(0,"span"),U.zc(1),U.Tb()),2&t){var n=U.gc(2);U.Cb(1),U.Bc(" ",n.entity.address.address_line_2,"")}}function L(t,e){if(1&t&&(U.Ub(0,"mat-tab-group"),U.Ub(1,"mat-tab",7),U.Ub(2,"div",8),U.Ub(3,"label",9),U.zc(4,"Customer Name:"),U.Tb(),U.Ub(5,"h3",null,10),U.zc(7),U.hc(8,"uppercase"),U.Tb(),U.Ub(9,"label",11),U.zc(10,"Status:"),U.Tb(),U.Ub(11,"h3",null,12),U.zc(13),U.Tb(),U.Ub(14,"label",13),U.zc(15,"Address:"),U.Tb(),U.Ub(16,"h3"),U.Ub(17,"span"),U.zc(18),U.Tb(),U.yc(19,A,2,1,"span",2),U.Pb(20,"br"),U.Ub(21,"span"),U.zc(22),U.Tb(),U.Tb(),U.Pb(23,"mat-divider"),U.Ub(24,"h3"),U.zc(25,"Default Contact"),U.Tb(),U.Ub(26,"label",14),U.zc(27,"Name:"),U.Tb(),U.Ub(28,"h3",null,15),U.zc(30),U.Tb(),U.Ub(31,"label",16),U.zc(32,"phone:"),U.Tb(),U.Ub(33,"a",17,18),U.zc(35),U.hc(36,"phone"),U.Tb(),U.Pb(37,"br"),U.Ub(38,"label",19),U.zc(39,"email:"),U.Tb(),U.Ub(40,"a",17,20),U.zc(42),U.Tb(),U.Tb(),U.Tb(),U.Ub(43,"mat-tab",21),U.Pb(44,"app-customer-details-contact",22),U.Tb(),U.Tb()),2&t){var n=U.gc();U.Cb(7),U.Ac(U.ic(8,13,n.entity.name)),U.Cb(6),U.Ac(n.entity.status),U.Cb(5),U.Ac(n.entity.address.address_line_1),U.Cb(1),U.lc("ngIf",null!=n.entity.address.address_line_2),U.Cb(3),U.Cc("",n.entity.address.city," ",n.entity.address.state,", ",n.entity.address.zipcode,""),U.Cb(8),U.Ac(n.entity.default_contact.name),U.Cb(3),U.lc("href","tel:"+n.entity.default_contact.phone,U.tc),U.Cb(2),U.Ac(U.ic(36,15,n.entity.default_contact.phone)),U.Cb(5),U.lc("href","mailto:"+n.entity.default_contact.email,U.tc),U.Cb(2),U.Ac(n.entity.default_contact.email),U.Cb(2),U.lc("contacts",n.contacts)}}var E,F=((E=function(){function t(e,n,i){_classCallCheck(this,t),this.service=e,this.dialogRef=n,this.data=i,this.loading=!0,this.contacts=[]}return _createClass(t,[{key:"ngOnInit",value:function(){this.entity=this.data,this.refreshData()}},{key:"refreshData",value:function(){var t=this;this.loading=!0,this.service.getDetails({id:this.data.id}).subscribe((function(e){1==e.success?(t.entity=e.data[0],t.contacts=t.entity.contacts,t.loading=!1):(t.service.notify("ERROR: could not reach the server"),t.loading=!1,t.dialogRef.close())}))}},{key:"dialogClose",value:function(){this.dialogRef.close({next:null})}},{key:"openEdit",value:function(){this.dialogRef.close({next:"open-edit",entity:this.entity})}},{key:"isLoading",get:function(){return this.loading}}]),t}()).\u0275fac=function(t){return new(t||E)(U.Ob(z),U.Ob(b.e),U.Ob(b.a))},E.\u0275cmp=U.Ib({type:E,selectors:[["app-customer-detail"]],decls:11,vars:2,consts:[[1,"header-section"],["class","loading-spinner-wrap",4,"ngIf"],[4,"ngIf"],[1,"actions"],["mat-raised-button","","color","primary","type","button",3,"click"],["mat-raised-button","","type","button",3,"click"],[1,"loading-spinner-wrap"],["label","Overview"],[1,"overview-section"],["for","eName"],["eName",""],["for","eStatus"],["eStatus",""],["for","eAddress"],["for","ecName"],["ecName",""],["for","ecPhone"],["mat-button","",3,"href"],["ecPhone",""],["for","ecEmail"],["ecEmail",""],["label","Contacts"],[3,"contacts"]],template:function(t,e){1&t&&(U.Ub(0,"div",0),U.Ub(1,"h2"),U.zc(2,"Customer Details"),U.Tb(),U.Tb(),U.Ub(3,"mat-dialog-content"),U.yc(4,q,2,0,"div",1),U.yc(5,L,45,17,"mat-tab-group",2),U.Tb(),U.Ub(6,"div",3),U.Ub(7,"button",4),U.cc("click",(function(){return e.openEdit()})),U.zc(8,"Edit"),U.Tb(),U.Ub(9,"button",5),U.cc("click",(function(){return e.dialogClose()})),U.zc(10,"Close"),U.Tb(),U.Tb()),2&t&&(U.Cb(4),U.lc("ngIf",e.isLoading),U.Cb(1),U.lc("ngIf",!e.isLoading))},directives:[b.c,r.m,u.b,h.b,C.b,C.a,f.a,u.a,M],pipes:[r.t,N],styles:[".actions[_ngcontent-%COMP%]{padding-top:20px}.actions[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-right:7px}"]}),E);function j(t,e){1&t&&(U.Ub(0,"div",3),U.Pb(1,"mat-spinner"),U.Tb())}function V(t,e){if(1&t&&(U.Ub(0,"div",16),U.Ub(1,"div",17),U.Ub(2,"h3",18),U.zc(3),U.Tb(),U.Ub(4,"span"),U.zc(5,"phone: "),U.Ub(6,"a",19),U.zc(7),U.hc(8,"phone"),U.Tb(),U.Tb(),U.Pb(9,"br"),U.Ub(10,"span"),U.zc(11,"email: "),U.Ub(12,"a",19),U.zc(13),U.Tb(),U.Tb(),U.Ub(14,"div",30),U.Ub(15,"button",31),U.zc(16,"set as default"),U.Tb(),U.Ub(17,"button",32),U.zc(18,"edit"),U.Tb(),U.Ub(19,"button",33),U.zc(20,"delete"),U.Tb(),U.Tb(),U.Tb(),U.Pb(21,"mat-divider"),U.Tb()),2&t){var n=e.$implicit;U.Cb(3),U.Ac(n.name),U.Cb(3),U.lc("href","tel:"+n.phone,U.tc),U.Cb(1),U.Ac(U.ic(8,5,n.phone)),U.Cb(5),U.lc("href","mailto:"+n.email,U.tc),U.Cb(1),U.Ac(n.email)}}function $(t,e){if(1&t){var n=U.Vb();U.Ub(0,"mat-tab-group"),U.Ub(1,"mat-tab",4),U.Ub(2,"mat-dialog-content"),U.Ub(3,"form",5,6),U.cc("ngSubmit",(function(){return U.sc(n),U.gc().applyEdit()})),U.Ub(5,"section",7),U.Ub(6,"mat-form-field"),U.Pb(7,"input",8),U.Tb(),U.Tb(),U.Ub(8,"section",9),U.Ub(9,"h4"),U.zc(10,"Customer's main address"),U.Tb(),U.Ub(11,"mat-form-field"),U.Pb(12,"input",10),U.Tb(),U.Ub(13,"mat-form-field"),U.Pb(14,"input",11),U.Tb(),U.Ub(15,"mat-form-field"),U.Pb(16,"input",12),U.Tb(),U.Ub(17,"mat-form-field"),U.Pb(18,"input",13),U.Tb(),U.Ub(19,"mat-form-field"),U.Pb(20,"input",14),U.Tb(),U.Tb(),U.Ub(21,"section",15),U.Pb(22,"mat-divider"),U.Ub(23,"h4"),U.zc(24,"Default Contact"),U.Tb(),U.Ub(25,"div",16),U.Ub(26,"div",17),U.Ub(27,"h3",18),U.zc(28),U.Tb(),U.Ub(29,"span"),U.zc(30,"phone: "),U.Ub(31,"a",19),U.zc(32),U.hc(33,"phone"),U.Tb(),U.Tb(),U.Pb(34,"br"),U.Ub(35,"span"),U.zc(36,"email: "),U.Ub(37,"a",19),U.zc(38),U.Tb(),U.Tb(),U.Tb(),U.Tb(),U.Tb(),U.Tb(),U.Tb(),U.Ub(39,"div",20),U.Ub(40,"button",21),U.cc("click",(function(){return U.sc(n),U.gc().applyEdit()})),U.zc(41,"Apply"),U.Tb(),U.Ub(42,"button",22),U.cc("click",(function(){return U.sc(n),U.gc().cancel()})),U.zc(43,"Cancel"),U.Tb(),U.Tb(),U.Tb(),U.Ub(44,"mat-tab",23),U.Ub(45,"mat-dialog-content"),U.Ub(46,"div",24),U.Ub(47,"form",5),U.cc("ngSubmit",(function(){return U.sc(n),U.gc().newContact()})),U.Ub(48,"h3"),U.zc(49,"Add new contact"),U.Tb(),U.Ub(50,"section",7),U.Ub(51,"mat-form-field"),U.Pb(52,"input",25),U.Tb(),U.Ub(53,"mat-form-field"),U.Pb(54,"input",26),U.Tb(),U.Ub(55,"mat-form-field"),U.Pb(56,"input",27),U.Tb(),U.Tb(),U.Ub(57,"button",28),U.zc(58,"New Contact"),U.Tb(),U.Tb(),U.Tb(),U.Pb(59,"mat-divider"),U.yc(60,V,22,7,"div",29),U.Tb(),U.Tb(),U.Tb()}if(2&t){var i=U.gc();U.Cb(3),U.lc("formGroup",i.form),U.Cb(25),U.Ac(i.defaultContact.name),U.Cb(3),U.lc("href","tel:"+i.defaultContact.phone,U.tc),U.Cb(1),U.Ac(U.ic(33,8,i.defaultContact.phone)),U.Cb(5),U.lc("href","mailto:"+i.defaultContact.email,U.tc),U.Cb(1),U.Ac(i.defaultContact.email),U.Cb(9),U.lc("formGroup",i.contactForm),U.Cb(13),U.lc("ngForOf",i.contacts)}}var B,G=((B=function(){function t(e,n,i,o){_classCallCheck(this,t),this.service=e,this.ref=n,this.formBuilder=i,this.data=o,this.form=new l.e({}),this.contactForm=new l.e({}),this.loading=!0,console.log(this.entity)}return _createClass(t,[{key:"ngOnInit",value:function(){this.entity=this.data,this.contacts=this.data.contacts,this.defaultContact=this.data.default_contact,this.refreshData()}},{key:"initForm",value:function(){var t={name:[this.entity.name,[l.p.required,l.p.minLength(3)]],status:[this.entity.status,l.p.required],country:[this.entity.address.country,l.p.required],address1:[this.entity.address.address_line_1,l.p.required],address2:[this.entity.address.address_line_2],city:[this.entity.address.city,l.p.required],state:[this.entity.address.state,l.p.required],zipcode:[this.entity.address.zipcode,[l.p.required,l.p.pattern("^[0-9]{5}(?:-[0-9]{4})?$")]]},e={name:["",[l.p.required,l.p.minLength(3)]],phone:["",[l.p.required,l.p.pattern("^\\d{10}$")]],email:["",[l.p.required,l.p.email]]};this.form=this.formBuilder.group(t),this.contactForm=this.formBuilder.group(e),this.loading=!1}},{key:"formatData",value:function(t){return{id:t.id,number:t.number,name:t.name,status:t.status,address:{country:t.country,address_line_1:t.address1,address_line_2:t.address2,city:t.city,state:t.state,zipcode:t.zipcode},default_contact:this.defaultContact,contacts:this.contacts}}},{key:"newContact",value:function(){var t=this;if(console.log("sss"),this.contactForm.valid)console.log("form is valid, should send values"),this.entity.contacts.push(this.contactForm.value),this.service.applyEdit(this.entity).subscribe((function(e){e.success?(t.contactForm.reset(),t.service.notify("Action has not been implemented")):t.service.notify("item could not be updated")}));else{console.log("form is invalid, showing notification");for(var e=0,n=Object.keys(this.form.controls);e<n.length;e++){var i=n[e];console.log(i+" is "+this.form.controls[i].status),"INVALID"==this.form.controls[i].status&&console.log(this.form.controls[i].errors)}console.log(this.form)}}},{key:"refreshData",value:function(){var t=this;this.loading=!0,this.service.getDetails({id:this.data.id}).subscribe((function(e){1==e.success?(t.entity=e.data[0],t.contacts=t.entity.contacts,t.initForm()):(t.service.notify("ERROR: could not reach the server"),t.loading=!1,t.ref.close())}))}},{key:"cancel",value:function(){this.ref.close({next:"open-details",entity:this.ref})}},{key:"applyEdit",value:function(){var t=this;if(this.form.valid)console.log("form is valid, should send values"),this.formatData(this.form.value),this.service.applyEdit(this.entity).subscribe((function(e){t.service.notify(e.success?"Action has not been implemented":"item could not be updated")}));else{console.log("form is invalid, showing notification");for(var e=0,n=Object.keys(this.form.controls);e<n.length;e++){var i=n[e];console.log(i+" is "+this.form.controls[i].status),"INVALID"==this.form.controls[i].status&&console.log(this.form.controls[i].errors)}console.log(this.form)}this.ref.close({next:"open-details",entity:this.entity})}},{key:"isLoading",get:function(){return this.loading}}]),t}()).\u0275fac=function(t){return new(t||B)(U.Ob(z),U.Ob(b.e),U.Ob(l.c),U.Ob(b.a))},B.\u0275cmp=U.Ib({type:B,selectors:[["app-customer-edit"]],decls:5,vars:2,consts:[[1,"header-section"],["class","loading-spinner-wrap",4,"ngIf"],[4,"ngIf"],[1,"loading-spinner-wrap"],["label","Customer Info"],[3,"formGroup","ngSubmit"],["EditForm",""],[1,"customer-name"],["matInput","","placeholder","Customer Name","type","text","min","3","formControlName","name","required",""],[1,"address-info"],["matInput","","placeholder","Address line 1","type","text","min","5","formControlName","address1","required",""],["matInput","","placeholder","Address line 2","type","text","formControlName","address2"],["matInput","","placeholder","City","type","text","min","3","formControlName","city","required",""],["matInput","","placeholder","State","type","text","min","3","formControlName","state","required",""],["matInput","","placeholder","Zip Code","type","text","formControlName","zipcode","required",""],[1,"contact-info"],[1,"item"],[1,"item-content"],[1,"contact-name"],["mat-button","","color","primary",3,"href"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","type","button",3,"click"],["label","Contacts"],[1,"new-contact-form"],["matInput","","placeholder","Contact Name","type","text","min","3","formControlName","name","required",""],["matInput","","placeholder","phone number","type","text","formControlName","phone","required",""],["matInput","","placeholder","email","type","email","formControlName","email","required",""],["mat-raised-button","","type","submit"],["class","item",4,"ngFor","ngForOf"],[1,"item-actions"],["mat-stroked-button","","color","primary"],["mat-button","","color","accent"],["mat-button","","color","warn"]],template:function(t,e){1&t&&(U.Ub(0,"div",0),U.Ub(1,"h2"),U.zc(2,"Edit Customer"),U.Tb(),U.Tb(),U.yc(3,j,2,0,"div",1),U.yc(4,$,61,10,"mat-tab-group",2)),2&t&&(U.Cb(3),U.lc("ngIf",e.isLoading),U.Cb(1),U.lc("ngIf",!e.isLoading))},directives:[r.m,h.b,C.b,C.a,b.c,l.q,l.l,l.f,x.b,m.a,l.b,l.k,l.d,l.o,f.a,u.a,u.b,r.l],pipes:[N],styles:[".item-content[_ngcontent-%COMP%]{padding:20px 0}.contact-name[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:500;margin-bottom:5px}.new-contact-form[_ngcontent-%COMP%]{margin:20px 0;padding:20px;border:1px solid rgba(0,0,0,.5);border-radius:5px}.mat-dialog-content[_ngcontent-%COMP%]{padding:0;margin:0;width:100%}form[_ngcontent-%COMP%]{padding:20px 0;display:flex;flex-flow:column}form[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:5px}.actions[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-right:8px}.item-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:20px 0}.item-actions[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{margin-right:8px}"]}),B),Y=n("UB86"),H=n("S8RS"),K=n("0MNC");function X(t,e){1&t&&(U.Ub(0,"div",12),U.Pb(1,"mat-spinner"),U.Tb())}function Z(t,e){if(1&t){var n=U.Vb();U.Ub(0,"th",13),U.Ub(1,"mat-checkbox",14),U.cc("change",(function(t){U.sc(n);var e=U.gc();return t?e.masterToggle():null})),U.Tb(),U.Tb()}if(2&t){var i=U.gc();U.Cb(1),U.lc("checked",i.selection.hasValue()&&i.isAllSelected())("indeterminate",i.selection.hasValue()&&!i.isAllSelected())("aria-label",i.checkboxLabel())}}function J(t,e){if(1&t){var n=U.Vb();U.Ub(0,"td",15),U.Ub(1,"mat-checkbox",16),U.cc("click",(function(t){return U.sc(n),t.stopPropagation()}))("change",(function(t){U.sc(n);var i=e.$implicit,o=U.gc();return t?o.selection.toggle(i):null})),U.Tb(),U.Tb()}if(2&t){var i=e.$implicit,o=U.gc();U.Cb(1),U.lc("checked",o.selection.isSelected(i))("aria-label",o.checkboxLabel(i))}}function Q(t,e){1&t&&(U.Ub(0,"th",17),U.zc(1,"Number"),U.Tb())}function W(t,e){if(1&t&&(U.Ub(0,"td",15),U.zc(1),U.Tb()),2&t){var n=e.$implicit;U.Cb(1),U.Bc(" ",n.number," ")}}function tt(t,e){1&t&&(U.Ub(0,"th",17),U.zc(1,"Name"),U.Tb())}function et(t,e){if(1&t&&(U.Ub(0,"td",15),U.zc(1),U.Tb()),2&t){var n=e.$implicit;U.Cb(1),U.Bc(" ",n.name," ")}}function nt(t,e){1&t&&(U.Ub(0,"th",17),U.zc(1,"Status"),U.Tb())}function it(t,e){if(1&t&&(U.Ub(0,"td",15),U.zc(1),U.Tb()),2&t){var n=e.$implicit;U.Cb(1),U.Bc(" ",n.status," ")}}function ot(t,e){1&t&&U.Pb(0,"tr",18)}function ct(t,e){if(1&t){var n=U.Vb();U.Ub(0,"tr",19),U.cc("click",(function(){U.sc(n);var t=e.$implicit;return U.gc().selectItem(t)})),U.Tb()}}var at,rt,st,lt,ut=((at=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this,t,i)).service=t,o.desktopDisplayedColumns=["select","number","name","status"],o.handsetDisplayedColumns=o.desktopDisplayedColumns,o}return _createClass(n,[{key:"ngOnInit",value:function(){this.refreshList()}},{key:"ngAfterViewInit",value:function(){this.initPaginators()}}]),n}(H.a)).\u0275fac=function(t){return new(t||at)(U.Ob(z),U.Ob(K.a))},at.\u0275cmp=U.Ib({type:at,selectors:[["app-customer-list"]],viewQuery:function(t,e){var n;1&t&&U.Ec(g.a,!0),2&t&&U.pc(n=U.dc())&&(e.sort=n.first)},features:[U.zb],decls:17,vars:7,consts:[["class","loading-spinner-wrap",4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8","entity-list",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","number"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","name"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","list-item",3,"click",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[1,"loading-spinner-wrap"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row","",1,"list-item",3,"click"]],template:function(t,e){1&t&&(U.yc(0,X,2,0,"div",0),U.Ub(1,"table",1),U.Sb(2,2),U.yc(3,Z,2,3,"th",3),U.yc(4,J,2,2,"td",4),U.Rb(),U.Sb(5,5),U.yc(6,Q,2,0,"th",6),U.yc(7,W,2,1,"td",4),U.Rb(),U.Sb(8,7),U.yc(9,tt,2,0,"th",6),U.yc(10,et,2,1,"td",4),U.Rb(),U.Sb(11,8),U.yc(12,nt,2,0,"th",6),U.yc(13,it,2,1,"td",4),U.Rb(),U.yc(14,ot,1,0,"tr",9),U.yc(15,ct,1,0,"tr",10),U.Tb(),U.Ub(16,"mat-paginator",11),U.cc("page",(function(t){return e.onPageChange(t)})),U.Tb()),2&t&&(U.lc("ngIf",e.isLoading),U.Cb(1),U.lc("dataSource",e.dataSource),U.Cb(13),U.lc("matHeaderRowDef",e.DisplayedColumns),U.Cb(1),U.lc("matRowDefColumns",e.DisplayedColumns),U.Cb(1),U.lc("length",e.length)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions))},directives:[r.m,y.j,g.a,y.c,y.e,y.b,y.g,y.i,p.a,h.b,y.d,d.a,y.a,g.b,y.f,y.h],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),at),dt=["List"],bt=[{path:"",component:(rt=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,i){var o;return _classCallCheck(this,n),(o=e.call(this,t)).dialog=t,o.service=i,o.title="Customers",o.dialogNew=I,o.dialogDelete=D,o.dialogDetails=F,o.dialogEdit=G,o}return _createClass(n,[{key:"ngOnInit",value:function(){}},{key:"onNew",value:function(){var t=this;this.dialog.open(this.dialogNew,{width:"400px",disableClose:!0,autoFocus:!1}).afterClosed().subscribe((function(e){t.listRef.refreshList()}))}},{key:"confirmDelete",value:function(){var t=this,e=this.checkedItems.length,n=this.entityRefText("customer","customers");if(e>0)try{this.service.delete(this.checkedItems).subscribe((function(i){i.success?(t.service.notify("A total of ".concat(e," ").concat(n," have been deleted")),t.listRef.refreshList()):t.service.notify("".concat(e," could not be deleted"))}))}catch(i){console.log("Action not implemented"),this.service.notify("Action not implemented")}else this.service.notify("nothing to delete")}},{key:"onDelete",value:function(){var t=this,e=this.checkedItems.length;if(e>0){var n=this.entityRefText("customer","customers");this.dialog.open(this.dialogDelete,{width:"400px",autoFocus:!1,data:{entityRefText:n,count:e}}).afterClosed().subscribe((function(e){console.log(e),1==e.userConfirmed&&t.confirmDelete()}))}else this.service.notify("no item selected")}},{key:"onSelect",value:function(t){var e=this;this.dialog.open(this.dialogDetails,{width:"400px",autoFocus:!1,disableClose:!0,data:t}).afterClosed().subscribe((function(t){switch(console.log(t),t.next){case"open-edit":e.onOpenEdit(t.entity);break;default:e.listRef.refreshList()}}))}}]),n}(T.a),rt.\u0275fac=function(t){return new(t||rt)(U.Ob(b.b),U.Ob(z))},rt.\u0275cmp=U.Ib({type:rt,selectors:[["app-customer"]],viewQuery:function(t,e){var n;1&t&&U.wc(dt,!0),2&t&&U.pc(n=U.dc())&&(e.listRef=n.first)},features:[U.zb],decls:3,vars:1,consts:[["showNewBtn","true","showDeleteBtn","true","showSearchBar","true",1,"entity-Toolbar",3,"title","newEvent","deleteEvent","searchChanged"],[3,"selectionChanged","itemSelected"],["List",""]],template:function(t,e){if(1&t){var n=U.Vb();U.Ub(0,"app-entity-toolbar",0),U.cc("newEvent",(function(){return e.onNew()}))("deleteEvent",(function(){return e.onDelete()}))("searchChanged",(function(t){return U.sc(n),U.qc(2).searchFor(t)})),U.Tb(),U.Ub(1,"app-customer-list",1,2),U.cc("selectionChanged",(function(t){return e.onSelectionChanged(t)}))("itemSelected",(function(t){return e.onSelect(t)})),U.Tb()}2&t&&U.lc("title",e.title)},directives:[Y.a,ut],styles:["[_nghost-%COMP%]{width:100%}"]}),rt)}],ft=((st=function t(){_classCallCheck(this,t)}).\u0275mod=U.Mb({type:st}),st.\u0275inj=U.Lb({factory:function(t){return new(t||st)},imports:[[v.d.forChild(bt)],v.d]}),st),mt=n("PCNd"),pt=((lt=function t(){_classCallCheck(this,t)}).\u0275mod=U.Mb({type:lt}),lt.\u0275inj=U.Lb({factory:function(t){return new(t||lt)},providers:[z],imports:[[r.c,ft,s.b,l.g,l.n,u.c,d.b,b.d,f.b,m.b,p.b,h.a,g.c,y.l,C.c,mt.a]]}),lt)}}]);